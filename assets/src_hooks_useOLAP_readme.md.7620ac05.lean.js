import{t as s,r as n,j as a,B as t,G as e,x as o,d as u,c,k as p,e as i,C as l,E as r}from"./common-15adca4d.js";import{O as C,C as E}from"./common-fdf4ca60.js";const d={"=":(s,n)=>s===n,">":(s,n)=>s>n,"<":(s,n)=>s<n,">=":(s,n)=>s>=n,"<=":(s,n)=>s<=n,"!=":(s,n)=>s!==n};function m(u,c={}){e(u)||(u=o(u)),c.columns||(c.columns=a(()=>{var s;return Object.keys(null!=(s=u.value[0])?s:[]).reduce((s,n)=>(s[n]=n,s),{})})),e(c.columns)||(c.columns=o(c.columns));const p=function(t,e){const o=n({list:[],cur:{field:"",operator:C.等于,value:""}}),u=a(()=>e.value),c=C,p=a(()=>o.cur.field?Array.from(new Set(t.value.map(s=>s[o.cur.field]).filter(s=>void 0!==s))):[]);function i(){o.cur.field="",o.cur.operator=C.等于,o.cur.value=""}const l=a(()=>o.cur.field&&o.cur.operator&&o.cur.value);return{...s(o),fieldOptions:u,operatorOptions:c,valueOptions:p,resetFilter:i,canAddFilter:l,addFilter:function(){l.value&&(o.list.push({field:o.cur.field,operator:o.cur.operator,value:o.cur.value}),i())}}}(u,c.columns),i=function(o,u={},c={}){var p,i;const l=n({settings:{dimension:c.dimension,measure:c.measure,series:c.series,bySeries:null!=(p=c.bySeries)&&p,countField:null!=(i=c.countField)?i:E}}),r=a(()=>u.dimensions?e(u.dimensions)?u.dimensions.value:u.dimensions:o.value),C=a(()=>u.measures?e(u.measures)?u.measures.value:u.measures:{[E]:"次数",...o.value}),d=a(()=>u.series?e(u.series)?u.series.value:u.series:o.value);t(r,()=>{var s;l.settings.dimension&&r.value[l.settings.dimension]||(l.settings.dimension=Object.keys(null!=(s=r.value)?s:{})[0])},{immediate:!0}),t(C,()=>{var s;l.settings.measure&&C.value[l.settings.measure]||(l.settings.measure=Object.keys(null!=(s=C.value)?s:{})[0])},{immediate:!0}),t(d,()=>{var s;l.settings.series&&d.value[l.settings.series]||(l.settings.series=Object.keys(null!=(s=d.value)?s:{})[0])},{immediate:!0});const m=a(()=>({dimension:r.value,measure:C.value,series:d.value}));return{...s(l),options:m}}(c.columns,c.options,c.defaultValues),{cube:l}=function(s,n,t){return{cube:a(()=>{const a=s.value.filter(s=>{for(const{field:a,operator:t,value:e}of n.value){if(!(0,d[t])(s[a],e))return!1}return!0}),{dimension:e,measure:o,series:u,bySeries:c,countField:p}=t.value;if(!e||!o||c&&!u)return[];function i(s,n,a){s[n]?s[n]+=o===p?1:Number(a[o])||0:s[n]=o===p?1:Number(a[o])||0}const l=[];if(c){let s={};for(const n of a){if(!(e in n))continue;const a=n[e];s[a]?s[a].push(n):s[a]=[n]}for(const n in s){const a={};for(const t of s[n])t.hasOwnProperty(u)&&i(a,t[u],t);for(const s in a)l.push({[e]:n,[u]:s,[o]:a[s]})}}else{const s={};for(const n of a)e in n&&i(s,n[e],n);for(const n in s)l.push({[e]:n,[o]:s[n]})}return l})}}(u,p.list,i.settings);return{cube:l,columns:c.columns,cubeSettings:i,filter:p}}const D=[{date:"2020-08-05",name:"a",age:18,action:"push",score:13},{date:"2020-08-05",name:"b",age:20,action:"pull",score:0},{date:"2020-08-05",name:"c",age:24,action:"push",score:4},{date:"2020-08-05",name:"d",age:22,action:"pull",score:3},{date:"2020-08-06",name:"a",age:18,action:"pull",score:-3},{date:"2020-08-06",name:"d",age:22,action:"push",score:9},{date:"2020-08-07",name:"b",age:20,action:"pull",score:15},{date:"2020-08-07",name:"c",age:24,action:"push",score:0},{date:"2020-08-08",name:"a",age:18,action:"push",score:1},{date:"2020-08-08",name:"d",age:22,action:"pull",score:17},{date:"2020-08-09",name:"a",age:18,action:"push"}];var F={setup(){const{cube:s,cubeSettings:n}=m(D);return{cube:s,cubeSettings:n}}};F.render=function(s,n,a,t,e,o){return c(),u("div")};var k={components:{demo10:F}};const g='{"title":"useDocumentVisibility","frontmatter":{},"headers":[{"level":2,"title":"代码演示","slug":"代码演示"},{"level":3,"title":"基本用法","slug":"基本用法"},{"level":3,"title":"参数","slug":"参数"}],"relativePath":"src/hooks/useOLAP/readme.md","lastUpdated":1602162468521.8936}',f=r('',4),h=r('',2);k.render=function(s,n,a,t,e,o){const r=p("demo10"),C=p("demo");return c(),u("div",null,[f,i("p",null,[i(C,{src:"./demo/demo.vue",language:"vue",title:"基本用法",desc:"分析多维数据",componentName:"demo10",htmlStr:"%3Cpre%20v-pre%3E%3Ccode%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Escript%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20attr-name%22%3Elang%3C%2Fspan%3E%3Cspan%20class%3D%22token%20attr-value%22%3E%3Cspan%20class%3D%22token%20punctuation%20attr-equals%22%3E%3D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3Ets%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20script%22%3E%3Cspan%20class%3D%22token%20language-javascript%22%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20useOLAP%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'%40dewfall%2Fvhooks'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20data%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'.%2Fdata'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20keyword%22%3Eexport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Edefault%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20function%22%3Esetup%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Econst%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%20cubeSettings%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20operator%22%3E%3D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20function%22%3EuseOLAP%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3Edata%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Ereturn%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%20%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%20%20cubeSettings%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Escript%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3C%2Fcode%3E%3C%2Fpre%3E",codeStr:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%0A%3Cscript%20lang%3D%22ts%22%3E%0Aimport%20%7B%20useOLAP%20%7D%20from%20'%40dewfall%2Fvhooks'%3B%0Aimport%20%7B%20data%20%7D%20from%20'.%2Fdata'%3B%0A%0Aexport%20default%20%7B%0A%20%20setup()%20%7B%0A%20%20%20%20const%20%7B%20cube%2C%20cubeSettings%20%7D%20%3D%20useOLAP(data)%3B%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20cube%2C%0A%20%20%20%20%20%20cubeSettings%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%0A%7D%3B%0A%3C%2Fscript%3E%0A"},{default:l(()=>[i(r)]),_:1})]),h])};export default k;export{g as __pageData};
