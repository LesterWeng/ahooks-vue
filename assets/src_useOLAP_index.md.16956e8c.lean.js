var s=Object.defineProperty,n=Object.defineProperties,a=Object.getOwnPropertyDescriptors,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(n,a,e)=>a in n?s(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,c=(s,n)=>{for(var a in n||(n={}))t.call(n,a)&&u(s,a,n[a]);if(e)for(var a of e(n))o.call(n,a)&&u(s,a,n[a]);return s};import{H as r,q as p,j as i,k as l,h as C,e as E,o as d,c as D,r as m,b as F,w as k,a as f}from"./app.96d8b727.js";import{O as h,C as v}from"./index.d99f697a.js";function b(s,e){const t=p({list:[],cur:{field:"",operator:h.等于,value:""}}),o=i((()=>e.value)),u=h,l=i((()=>t.cur.field?Array.from(new Set(s.value.map((s=>s[t.cur.field])).filter((s=>void 0!==s)))):[]));function C(){t.cur.field="",t.cur.operator=h.等于,t.cur.value=""}const E=i((()=>t.cur.field&&t.cur.operator&&t.cur.value));return d=c({},r(t)),n(d,a({fieldOptions:o,operatorOptions:u,valueOptions:l,resetFilter:C,canAddFilter:E,addFilter:function(){E.value&&(t.list.push({field:t.cur.field,operator:t.cur.operator,value:t.cur.value}),C())}}));var d}const g={"=":(s,n)=>s===n,">":(s,n)=>s>n,"<":(s,n)=>s<n,">=":(s,n)=>s>=n,"<=":(s,n)=>s<=n,"!=":(s,n)=>s!==n};function A(s,n={}){l(s)||(s=E(s)),n.columns||(n.columns=i((()=>{var n;return Object.keys(null!=(n=s.value[0])?n:[]).reduce(((s,n)=>(s[n]=n,s)),{})}))),l(n.columns)||(n.columns=E(n.columns));const a=b(s,n.columns),{cubeSettings:e,cubeOptions:t}=function(s,n={},a={}){var e;const t=p({dimension:a.dimension,measure:a.measure,series:a.series,countField:null!=(e=a.countField)?e:v}),o=i((()=>n.dimensions?l(n.dimensions)?n.dimensions.value:n.dimensions:s.value)),u=i((()=>n.measures?l(n.measures)?n.measures.value:n.measures:c({[v]:"次数"},s.value))),r=i((()=>n.series?l(n.series)?n.series.value:n.series:s.value));C(o,(()=>{var s;t.dimension&&o.value[t.dimension]||(t.dimension=Object.keys(null!=(s=o.value)?s:{})[0])}),{immediate:!0}),C(u,(()=>{var s;t.measure&&u.value[t.measure]||(t.measure=Object.keys(null!=(s=u.value)?s:{})[0])}),{immediate:!0}),C(r,(()=>{var s;t.series&&r.value[t.series]||(t.series=Object.keys(null!=(s=r.value)?s:{})[0])}),{immediate:!0});const E=i((()=>({dimension:o.value,measure:u.value,series:r.value})));return{cubeSettings:t,cubeOptions:E}}(n.columns,n.options,n.defaultValues),{cubeD1:o,cubeD2:u,chartCubeD1:r,chartCubeD2:d}=function(s,n,a){function e(s,n,a,e,t){s[n]?s[n]+=e===t?1:Number(a[e])||0:s[n]=e===t?1:Number(a[e])||0}const t=i((()=>s.value.filter((s=>{for(const{field:a,operator:e,value:t}of n.value)if(!(0,g[e])(s[a],t))return!1;return!0})))),o=i((()=>{const{measure:s,series:n,countField:o}=a;if(!s||!n)return[];let u=[];const c={};for(const a of t.value)n in a&&e(c,a[n],a,s,o);for(const a in c)u.push({[n]:String(a)||"<空>",[s]:c[a]});return u=u.sort(((s,a)=>s[n]<a[n]?-1:1)),u})),u=i((()=>{const{dimension:s,measure:n,series:o,countField:u}=a;if(!n||!o||!s)return[];let c=[];const r={};for(const a of t.value){if(!(s in a))continue;const n=String(a[s]||"<空>");r[n]?r[n].push(a):r[n]=[a]}for(const a in r){const t={};for(const s of r[a])e(t,String(s[o]||"<空>"),s,n,u);for(const e in t)c.push({[s]:a,[o]:e,[n]:t[e]})}return c=c.sort(((n,a)=>n[s]<a[s]?-1:1)),c})),c=i((()=>{const{series:s,measure:n}=a;return{columns:[s,n],rows:o.value}})),r=i((()=>{const{dimension:s,series:n,measure:e}=a,t=[s],o=Array.from(new Set(u.value.map((s=>s[n]))));t.push(...o);let c=u.value;const r={};for(const a of c){const t=a[s],o=a[n],u=a[e];r[t]?r[t][o]=u:r[t]={[s]:t,[o]:u}}return c=Object.values(r),{columns:t,rows:c}}));return{cubeD1:o,cubeD2:u,chartCubeD1:c,chartCubeD2:r}}(s,a.list,e);return{cubeD1:o,cubeD2:u,chartCubeD1:r,chartCubeD2:d,columns:n.columns,cubeSettings:e,cubeOptions:t,filter:a}}const y=[{date:"2020-08-08",name:"d",age:22,action:"pull",score:17},{date:"2020-08-05",name:"a",age:18,action:"push",score:13},{date:"2020-08-05",name:"b",age:20,action:"pull",score:0},{date:"2020-08-05",name:"c",age:24,action:"push",score:4},{date:"2020-08-05",name:"d",age:22,action:"pull",score:3},{date:"2020-08-06",name:"a",age:18,action:"pull",score:-3},{date:"2020-08-06",name:"d",age:22,action:"push",score:9},{date:"2020-08-07",name:"b",age:20,action:"pull",score:15},{date:"2020-08-07",name:"c",age:24,action:"push",score:0},{date:"2020-08-08",name:"a",age:18,action:"push",score:1},{date:"2020-08-09",name:"a",age:18,action:"push"}];var B={setup(){const{cube:s,cubeSettings:n}=A(y);return{cube:s,cubeSettings:n}}};B.render=function(s,n,a,e,t,o){return d(),D("div")};const O={components:{demo29:B}},_='{"title":"useDocumentVisibility","description":"","frontmatter":{"map":{"realPath":"src/useOLAP/index.md"}},"headers":[{"level":2,"title":"代码演示","slug":"代码演示"},{"level":3,"title":"基本用法","slug":"基本用法"},{"level":3,"title":"参数","slug":"参数"}],"relativePath":"src/useOLAP/index.md","lastUpdated":1627463930388}',S=f('',4),w=f('',2);O.render=function(s,n,a,e,t,o){const u=m("demo29"),c=m("demo");return d(),D("div",null,[S,F("p",null,[F(c,{src:"./demo/demo.vue",language:"vue",title:"基本用法",desc:"分析多维数据",componentName:"demo29",htmlStr:"%3Cpre%20v-pre%3E%3Ccode%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Escript%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20attr-name%22%3Elang%3C%2Fspan%3E%3Cspan%20class%3D%22token%20attr-value%22%3E%3Cspan%20class%3D%22token%20punctuation%20attr-equals%22%3E%3D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3Ets%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20script%22%3E%3Cspan%20class%3D%22token%20language-javascript%22%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20useOLAP%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'ahooks-vue'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20data%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'.%2Fdata'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20keyword%22%3Eexport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Edefault%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20function%22%3Esetup%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Econst%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%20cubeSettings%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20operator%22%3E%3D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20function%22%3EuseOLAP%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3Edata%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Ereturn%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%20%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%20%20cubeSettings%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Escript%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3C%2Fcode%3E%3C%2Fpre%3E",codeStr:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%0A%3Cscript%20lang%3D%22ts%22%3E%0Aimport%20%7B%20useOLAP%20%7D%20from%20'ahooks-vue'%3B%0Aimport%20%7B%20data%20%7D%20from%20'.%2Fdata'%3B%0A%0Aexport%20default%20%7B%0A%20%20setup()%20%7B%0A%20%20%20%20const%20%7B%20cube%2C%20cubeSettings%20%7D%20%3D%20useOLAP(data)%3B%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20cube%2C%0A%20%20%20%20%20%20cubeSettings%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%0A%7D%3B%0A%3C%2Fscript%3E%0A"},{default:k((()=>[F(u)])),_:1})]),w])};export default O;export{_ as __pageData};
