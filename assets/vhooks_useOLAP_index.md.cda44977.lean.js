import{t as s,r as n,j as a,G as e,B as t,x as o,d as u,c,k as p,e as i,C as l,E as r}from"./common-569d9d4d.js";import{O as C,C as E}from"./common-c500683c.js";const d={"=":(s,n)=>s===n,">":(s,n)=>s>n,"<":(s,n)=>s<n,">=":(s,n)=>s>=n,"<=":(s,n)=>s<=n,"!=":(s,n)=>s!==n};function m(u,c={}){e(u)||(u=o(u)),c.columns||(c.columns=a(()=>{var s;return Object.keys(null!=(s=u.value[0])?s:[]).reduce((s,n)=>(s[n]=n,s),{})})),e(c.columns)||(c.columns=o(c.columns));const p=function(e,t){const o=n({list:[],cur:{field:"",operator:C.等于,value:""}}),u=a(()=>t.value),c=C,p=a(()=>o.cur.field?Array.from(new Set(e.value.map(s=>s[o.cur.field]).filter(s=>void 0!==s))):[]);function i(){o.cur.field="",o.cur.operator=C.等于,o.cur.value=""}const l=a(()=>o.cur.field&&o.cur.operator&&o.cur.value);return{...s(o),fieldOptions:u,operatorOptions:c,valueOptions:p,resetFilter:i,canAddFilter:l,addFilter:function(){l.value&&(o.list.push({field:o.cur.field,operator:o.cur.operator,value:o.cur.value}),i())}}}(u,c.columns),{cubeSettings:i,cubeOptions:l}=function(s,o={},u={}){var c,p;const i=n({dimension:u.dimension,measure:u.measure,series:u.series,bySeries:null!=(c=u.bySeries)&&c,countField:null!=(p=u.countField)?p:E}),l=a(()=>o.dimensions?e(o.dimensions)?o.dimensions.value:o.dimensions:s.value),r=a(()=>o.measures?e(o.measures)?o.measures.value:o.measures:{[E]:"次数",...s.value}),C=a(()=>o.series?e(o.series)?o.series.value:o.series:s.value);t(l,()=>{var s;i.dimension&&l.value[i.dimension]||(i.dimension=Object.keys(null!=(s=l.value)?s:{})[0])},{immediate:!0}),t(r,()=>{var s;i.measure&&r.value[i.measure]||(i.measure=Object.keys(null!=(s=r.value)?s:{})[0])},{immediate:!0}),t(C,()=>{var s;i.series&&C.value[i.series]||(i.series=Object.keys(null!=(s=C.value)?s:{})[0])},{immediate:!0});const d=a(()=>({dimension:l.value,measure:r.value,series:C.value}));return{cubeSettings:i,cubeOptions:d}}(c.columns,c.options,c.defaultValues),{cube:r,chartCube:m}=function(s,n,e){const t=a(()=>{const a=s.value.filter(s=>{for(const{field:a,operator:e,value:t}of n.value){if(!(0,d[e])(s[a],t))return!1}return!0}),{dimension:t,measure:o,series:u,bySeries:c,countField:p}=e;if(!t||!o||c&&!u)return[];function i(s,n,a){s[n]?s[n]+=o===p?1:Number(a[o])||0:s[n]=o===p?1:Number(a[o])||0}let l=[];if(c){const s={};for(const n of a){if(!(t in n))continue;const a=n[t];s[a]?s[a].push(n):s[a]=[n]}for(const n in s){const a={};for(const e of s[n])i(a,e[u],e);for(const s in a)l.push({[t]:n,[u]:s,[o]:a[s]})}}else{const s={};for(const n of a)t in n&&i(s,n[t],n);for(const n in s)l.push({[t]:n,[o]:s[n]})}return l=l.sort((s,n)=>s[t]<n[t]?-1:1),l}),o=a(()=>{const{dimension:s,measure:n,series:a,bySeries:o}=e,u=[s];if(o){const s=Array.from(new Set(t.value.map(s=>s[a])));u.push(...s)}else u.push(n);let c=t.value;if(o){const e={};for(const o of t.value){const t=o[s],u=o[a],c=o[n];e[t]?e[t][u]=c:e[t]={[s]:t,[u]:c}}c=Object.values(e)}return{columns:u,rows:c}});return{cube:t,chartCube:o}}(u,p.list,i);return{cube:r,chartCube:m,columns:c.columns,cubeSettings:i,cubeOptions:l,filter:p}}const D=[{date:"2020-08-08",name:"d",age:22,action:"pull",score:17},{date:"2020-08-05",name:"a",age:18,action:"push",score:13},{date:"2020-08-05",name:"b",age:20,action:"pull",score:0},{date:"2020-08-05",name:"c",age:24,action:"push",score:4},{date:"2020-08-05",name:"d",age:22,action:"pull",score:3},{date:"2020-08-06",name:"a",age:18,action:"pull",score:-3},{date:"2020-08-06",name:"d",age:22,action:"push",score:9},{date:"2020-08-07",name:"b",age:20,action:"pull",score:15},{date:"2020-08-07",name:"c",age:24,action:"push",score:0},{date:"2020-08-08",name:"a",age:18,action:"push",score:1},{date:"2020-08-09",name:"a",age:18,action:"push"}];var k={setup(){const{cube:s,cubeSettings:n}=m(D);return{cube:s,cubeSettings:n}}};k.render=function(s,n,a,e,t,o){return c(),u("div")};var F={components:{demo32:k}};const f='{"title":"useDocumentVisibility","frontmatter":{},"headers":[{"level":2,"title":"代码演示","slug":"代码演示"},{"level":3,"title":"基本用法","slug":"基本用法"},{"level":3,"title":"参数","slug":"参数"}],"relativePath":"packages/vhooks/src/useOLAP/index.md","lastUpdated":1602817479457}',h=r('',4),v=r('',2);F.render=function(s,n,a,e,t,o){const r=p("demo32"),C=p("demo");return c(),u("div",null,[h,i("p",null,[i(C,{src:"./demo/demo.vue",language:"vue",title:"基本用法",desc:"分析多维数据",componentName:"demo32",htmlStr:"%3Cpre%20v-pre%3E%3Ccode%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Escript%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20attr-name%22%3Elang%3C%2Fspan%3E%3Cspan%20class%3D%22token%20attr-value%22%3E%3Cspan%20class%3D%22token%20punctuation%20attr-equals%22%3E%3D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3Ets%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20script%22%3E%3Cspan%20class%3D%22token%20language-javascript%22%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20useOLAP%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'%40dewfall%2Fvhooks'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20data%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'.%2Fdata'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20keyword%22%3Eexport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Edefault%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20function%22%3Esetup%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Econst%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%20cubeSettings%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20operator%22%3E%3D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20function%22%3EuseOLAP%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3Edata%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Ereturn%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%20%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%20%20cubeSettings%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Escript%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3C%2Fcode%3E%3C%2Fpre%3E",codeStr:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%0A%3Cscript%20lang%3D%22ts%22%3E%0Aimport%20%7B%20useOLAP%20%7D%20from%20'%40dewfall%2Fvhooks'%3B%0Aimport%20%7B%20data%20%7D%20from%20'.%2Fdata'%3B%0A%0Aexport%20default%20%7B%0A%20%20setup()%20%7B%0A%20%20%20%20const%20%7B%20cube%2C%20cubeSettings%20%7D%20%3D%20useOLAP(data)%3B%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20cube%2C%0A%20%20%20%20%20%20cubeSettings%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%0A%7D%3B%0A%3C%2Fscript%3E%0A"},{default:l(()=>[i(r)]),_:1})]),v])};export default F;export{f as __pageData};
