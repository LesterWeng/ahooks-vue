import{b as e,d as a,n as t,w as s,i as o,o as n,c as r,f as l,e as c,F as d,q as i,j as u,h as p,B as m,C as v,E as g,v as k,x as y}from"./app.127dcd3e.js";import"./type.fa943275.js";const h={page:{index:1,size:10},search:{text:"",isReg:!1,keys:[]},sort:{key:"",direction:"ascend",compareFn:function(e,a){return e<a?-1:1}}};function x(n,r){const{page:l,sort:c,search:d}=t.merge({},h,r),i=o(n)?n:e((()=>n)),u=a(l),p=a(c),m=a(d),v=function(o,n){var r;let l;l="function"==typeof o?e(o):o;const c=a(l.value),d=t.throttle((()=>{c.value=l.value}),null!=(r=null==n?void 0:n.wait)?r:1e3,n);return s(l,d),c}((()=>m.value.text),{wait:500}),g=e((()=>{let e=[...i.value];const a=v.value.trim();return a&&(e=e.filter((e=>{var t;let s="";if(s=(null==(t=m.value.keys)?void 0:t.length)?m.value.keys.map((a=>e[a])).join(" "):JSON.stringify(e),m.value.isReg)try{return Boolean(s.match(new RegExp(a)))}catch(o){}return s.toLocaleLowerCase().includes(a.toLocaleLowerCase())}))),p.value.key&&e.sort(((e,a)=>{const t=p.value.key,s=p.value.compareFn(e[t],a[t]);return"ascend"===p.value.direction?s:-1*s})),e})),k=e((()=>g.value.length)),y=e((()=>{let e=[...g.value];const a=(u.value.index-1)*u.value.size,t=a+u.value.size;return e=e.slice(a,t),e}));return s((()=>n),(()=>{m.value.text=""})),s((()=>u.value.size),(()=>{u.value.index=1}),{immediate:!1}),s((()=>g.value),(()=>{u.value.index=1})),{data:i,page:u,search:m,sort:p,pagedData:y,total:k}}const f={},w={t:"1603888743183",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3090",width:"16",height:"16"},b=l("path",{d:"M512 885.6L63.6 138.4h896.8L512 885.6z","p-id":"3091",fill:"currentColor"},null,-1);f.render=function(e,a){return n(),r("svg",w,[b])};var C={components:{SortIcon:f},props:{columns:Object,data:Array,sort:Object},setup:e=>({onHeaderClick:function(a,t){e.sort.key=a,e.sort.direction=t}})};const L=m("data-v-64dbe56d")(((e,a,t,s,o,m)=>{const v=c("SortIcon");return n(),r("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Object.keys(t.columns).length}, 1fr)`}},[(n(!0),r(d,null,i(t.columns,((e,a)=>(n(),r("span",{key:a,class:"column sortable-header"},[u(p(e)+" ",1),l(v,{class:["icon",t.sort.key===a?"active":"",t.sort.direction],onClick:e=>s.onHeaderClick(a,"ascend"===t.sort.direction?"descend":"ascend")},null,8,["class","onClick"])])))),128)),(n(!0),r(d,null,i(t.data,((e,a)=>(n(),r(d,null,[(n(!0),r(d,null,i(t.columns,((t,s)=>(n(),r("span",{key:s+a,class:"row"},p(e[s]),1)))),128))],64)))),256))],4)}));C.render=L,C.__scopeId="data-v-64dbe56d";var z={props:{modelValue:Number,total:Number,size:Number},setup:(a,{emit:t})=>({onClick:function(e){t("update:modelValue",e)},totalPage:e((()=>Math.ceil(a.total/a.size)))})};const N=m("data-v-c6e42116");v("data-v-c6e42116");const P={style:{display:"flex",margin:"10px 0"}};g();const j=N(((e,a,t,s,o,l)=>(n(),r("div",P,[(n(!0),r(d,null,i(Array(s.totalPage),((e,a)=>(n(),r("div",{class:["page-item",t.modelValue===a+1?"active":""],key:a,onClick:e=>s.onClick(a+1)},p(a+1),11,["onClick"])))),128))]))));z.render=j,z.__scopeId="data-v-c6e42116";const S={key:"index",name:"name",age:"age",address:"address",score:"score"},V=[{key:"1",name:"John Brown",age:32,address:"New York No. 1 Lake Park",score:5},{key:"2",name:"Jim Green",age:42,address:"London No. 1 Lake Park",score:2},{key:"3",name:"Joe Black",age:32,address:"Sidney No. 1 Lake Park",score:1},{key:"4",name:"Am",age:22,address:"Sidney No. 1 Lake Park",score:8},{key:"5",name:"Joe Red",age:19,address:"Sidney No. 1 Lake Park",score:6},{key:"6",name:"Joe Dendi",age:39,address:"Sidney No. 1 Lake Park",score:0}];var J={components:{MyTable:C,Pagination:z},setup(){const{pagedData:e,page:a,total:t,search:s,sort:o}=x(V,{page:{size:5},sort:{key:"score",direction:"descend"}});return{pagedData:e,page:a,total:t,columns:S,search:s,sort:o}}};const B={style:{"margin-bottom":"12px"}};J.render=function(e,a,t,s,o,d){const i=c("MyTable"),u=c("Pagination");return n(),r("div",null,[l("div",B,[k(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>s.search.text=e),placeholder:"search"},null,512),[[y,s.search.text]])]),l(i,{columns:s.columns,data:s.pagedData,sort:s.sort},null,8,["columns","data","sort"]),l(u,{modelValue:s.page.index,"onUpdate:modelValue":a[2]||(a[2]=e=>s.page.index=e),total:s.total,size:s.page.size},null,8,["modelValue","total","size"])])};export{J as _};
