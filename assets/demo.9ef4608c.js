import{M as e,g as a,u as s,z as t,o,c as n,b as r,j as l,F as c,q as d,D as i,p as u,A as m,B as p,C as g,l as k,N as v}from"./framework.8cd85e4b.js";import{l as y}from"./axios.b3cfc440.js";import{u as h}from"./index.6e3b08ad.js";const x={page:{index:1,size:10},search:{text:"",isReg:!1,keys:[]},sort:{key:"",direction:"ascend",compareFn:function(e,a){return e<a?-1:1}}};const f={},b={t:"1603888743183",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3090",width:"16",height:"16"},w=r("path",{d:"M512 885.6L63.6 138.4h896.8L512 885.6z","p-id":"3091",fill:"currentColor"},null,-1);f.render=function(e,a){return o(),n("svg",b,[w])};var C={components:{SortIcon:f},props:{columns:Object,data:Array,sort:Object},setup:e=>({onHeaderClick:function(a,s){e.sort.key=a,e.sort.direction=s}})};const L=m("data-v-64dbe56d")(((e,a,s,t,m,p)=>{const g=l("SortIcon");return o(),n("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Object.keys(s.columns).length}, 1fr)`}},[(o(!0),n(c,null,d(s.columns,((e,a)=>(o(),n("span",{key:a,class:"column sortable-header"},[i(u(e)+" ",1),r(g,{class:["icon",s.sort.key===a?"active":"",s.sort.direction],onClick:e=>t.onHeaderClick(a,"ascend"===s.sort.direction?"descend":"ascend")},null,8,["class","onClick"])])))),128)),(o(!0),n(c,null,d(s.data,((e,a)=>(o(),n(c,null,[(o(!0),n(c,null,d(s.columns,((s,t)=>(o(),n("span",{key:t+a,class:"row"},u(e[t]),1)))),128))],64)))),256))],4)}));C.render=L,C.__scopeId="data-v-64dbe56d";var z={props:{modelValue:Number,total:Number,size:Number},setup:(e,{emit:s})=>({onClick:function(e){s("update:modelValue",e)},totalPage:a((()=>Math.ceil(e.total/e.size)))})};const N=m("data-v-c6e42116");p("data-v-c6e42116");const P={style:{display:"flex",margin:"10px 0"}};g();const j=N(((e,a,s,t,r,l)=>(o(),n("div",P,[(o(!0),n(c,null,d(Array(t.totalPage),((e,a)=>(o(),n("div",{class:["page-item",s.modelValue===a+1?"active":""],key:a,onClick:e=>t.onClick(a+1)},u(a+1),11,["onClick"])))),128))]))));z.render=j,z.__scopeId="data-v-c6e42116";const S={key:"index",name:"name",age:"age",address:"address",score:"score"},V=[{key:"1",name:"John Brown",age:32,address:"New York No. 1 Lake Park",score:5},{key:"2",name:"Jim Green",age:42,address:"London No. 1 Lake Park",score:2},{key:"3",name:"Joe Black",age:32,address:"Sidney No. 1 Lake Park",score:1},{key:"4",name:"Am",age:22,address:"Sidney No. 1 Lake Park",score:8},{key:"5",name:"Joe Red",age:19,address:"Sidney No. 1 Lake Park",score:6},{key:"6",name:"Joe Dendi",age:39,address:"Sidney No. 1 Lake Park",score:0}];var D={components:{MyTable:C,Pagination:z},setup(){const{pagedData:o,page:n,total:r,search:l,sort:c}=function(o,n){const{page:r,sort:l,search:c}=y.merge({},x,n),d=e(o)?o:a((()=>o)),i=s(r),u=s(l),m=s(c),p=h((()=>m.value.text),{wait:500}),g=a((()=>{let e=[...d.value];const a=p.value.trim();return a&&(e=e.filter((e=>{var s;let t="";if(t=(null==(s=m.value.keys)?void 0:s.length)?m.value.keys.map((a=>e[a])).join(" "):JSON.stringify(e),m.value.isReg)try{return Boolean(t.match(new RegExp(a)))}catch(o){}return t.toLocaleLowerCase().includes(a.toLocaleLowerCase())}))),u.value.key&&e.sort(((e,a)=>{const s=u.value.key,t=u.value.compareFn(e[s],a[s]);return"ascend"===u.value.direction?t:-1*t})),e})),k=a((()=>g.value.length)),v=a((()=>{let e=[...g.value];const a=(i.value.index-1)*i.value.size,s=a+i.value.size;return e=e.slice(a,s),e}));return t((()=>o),(()=>{m.value.text=""})),t((()=>i.value.size),(()=>{i.value.index=1}),{immediate:!1}),t((()=>g.value),(()=>{i.value.index=1})),{data:d,page:i,search:m,sort:u,pagedData:v,total:k}}(V,{page:{size:5},sort:{key:"score",direction:"descend"}});return{pagedData:o,page:n,total:r,columns:S,search:l,sort:c}}};const J={style:{"margin-bottom":"12px"}};D.render=function(e,a,s,t,c,d){const i=l("MyTable"),u=l("Pagination");return o(),n("div",null,[r("div",J,[k(r("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>t.search.text=e),placeholder:"search"},null,512),[[v,t.search.text]])]),r(i,{columns:t.columns,data:t.pagedData,sort:t.sort},null,8,["columns","data","sort"]),r(u,{modelValue:t.page.index,"onUpdate:modelValue":a[2]||(a[2]=e=>t.page.index=e),total:t.total,size:t.page.size},null,8,["modelValue","total","size"])])};export{D as _};
