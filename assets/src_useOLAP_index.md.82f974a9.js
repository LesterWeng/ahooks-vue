var s=Object.defineProperty,n=Object.defineProperties,e=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(n,e,a)=>e in n?s(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,c=(s,n)=>{for(var e in n||(n={}))t.call(n,e)&&u(s,e,n[e]);if(a)for(var e of a(n))o.call(n,e)&&u(s,e,n[e]);return s};import{H as r,q as p,j as i,k as l,h as C,e as E,o as d,c as D,r as m,b as F,w as k,a as f}from"./app.988e7912.js";import{O as h,C as v}from"./index.b36f4fe7.js";function b(s,a){const t=p({list:[],cur:{field:"",operator:h.等于,value:""}}),o=i((()=>a.value)),u=h,l=i((()=>t.cur.field?Array.from(new Set(s.value.map((s=>s[t.cur.field])).filter((s=>void 0!==s)))):[]));function C(){t.cur.field="",t.cur.operator=h.等于,t.cur.value=""}const E=i((()=>t.cur.field&&t.cur.operator&&t.cur.value));return d=c({},r(t)),n(d,e({fieldOptions:o,operatorOptions:u,valueOptions:l,resetFilter:C,canAddFilter:E,addFilter:function(){E.value&&(t.list.push({field:t.cur.field,operator:t.cur.operator,value:t.cur.value}),C())}}));var d}const g={"=":(s,n)=>s===n,">":(s,n)=>s>n,"<":(s,n)=>s<n,">=":(s,n)=>s>=n,"<=":(s,n)=>s<=n,"!=":(s,n)=>s!==n};function A(s,n={}){l(s)||(s=E(s)),n.columns||(n.columns=i((()=>{var n;return Object.keys(null!=(n=s.value[0])?n:[]).reduce(((s,n)=>(s[n]=n,s)),{})}))),l(n.columns)||(n.columns=E(n.columns));const e=b(s,n.columns),{cubeSettings:a,cubeOptions:t}=function(s,n={},e={}){var a;const t=p({dimension:e.dimension,measure:e.measure,series:e.series,countField:null!=(a=e.countField)?a:v}),o=i((()=>n.dimensions?l(n.dimensions)?n.dimensions.value:n.dimensions:s.value)),u=i((()=>n.measures?l(n.measures)?n.measures.value:n.measures:c({[v]:"次数"},s.value))),r=i((()=>n.series?l(n.series)?n.series.value:n.series:s.value));C(o,(()=>{var s;t.dimension&&o.value[t.dimension]||(t.dimension=Object.keys(null!=(s=o.value)?s:{})[0])}),{immediate:!0}),C(u,(()=>{var s;t.measure&&u.value[t.measure]||(t.measure=Object.keys(null!=(s=u.value)?s:{})[0])}),{immediate:!0}),C(r,(()=>{var s;t.series&&r.value[t.series]||(t.series=Object.keys(null!=(s=r.value)?s:{})[0])}),{immediate:!0});const E=i((()=>({dimension:o.value,measure:u.value,series:r.value})));return{cubeSettings:t,cubeOptions:E}}(n.columns,n.options,n.defaultValues),{cubeD1:o,cubeD2:u,chartCubeD1:r,chartCubeD2:d}=function(s,n,e){function a(s,n,e,a,t){s[n]?s[n]+=a===t?1:Number(e[a])||0:s[n]=a===t?1:Number(e[a])||0}const t=i((()=>s.value.filter((s=>{for(const{field:e,operator:a,value:t}of n.value)if(!(0,g[a])(s[e],t))return!1;return!0})))),o=i((()=>{const{measure:s,series:n,countField:o}=e;if(!s||!n)return[];let u=[];const c={};for(const e of t.value)n in e&&a(c,e[n],e,s,o);for(const e in c)u.push({[n]:String(e)||"<空>",[s]:c[e]});return u=u.sort(((s,e)=>s[n]<e[n]?-1:1)),u})),u=i((()=>{const{dimension:s,measure:n,series:o,countField:u}=e;if(!n||!o||!s)return[];let c=[];const r={};for(const e of t.value){if(!(s in e))continue;const n=String(e[s]||"<空>");r[n]?r[n].push(e):r[n]=[e]}for(const e in r){const t={};for(const s of r[e])a(t,String(s[o]||"<空>"),s,n,u);for(const a in t)c.push({[s]:e,[o]:a,[n]:t[a]})}return c=c.sort(((n,e)=>n[s]<e[s]?-1:1)),c})),c=i((()=>{const{series:s,measure:n}=e;return{columns:[s,n],rows:o.value}})),r=i((()=>{const{dimension:s,series:n,measure:a}=e,t=[s],o=Array.from(new Set(u.value.map((s=>s[n]))));t.push(...o);let c=u.value;const r={};for(const e of c){const t=e[s],o=e[n],u=e[a];r[t]?r[t][o]=u:r[t]={[s]:t,[o]:u}}return c=Object.values(r),{columns:t,rows:c}}));return{cubeD1:o,cubeD2:u,chartCubeD1:c,chartCubeD2:r}}(s,e.list,a);return{cubeD1:o,cubeD2:u,chartCubeD1:r,chartCubeD2:d,columns:n.columns,cubeSettings:a,cubeOptions:t,filter:e}}const y=[{date:"2020-08-08",name:"d",age:22,action:"pull",score:17},{date:"2020-08-05",name:"a",age:18,action:"push",score:13},{date:"2020-08-05",name:"b",age:20,action:"pull",score:0},{date:"2020-08-05",name:"c",age:24,action:"push",score:4},{date:"2020-08-05",name:"d",age:22,action:"pull",score:3},{date:"2020-08-06",name:"a",age:18,action:"pull",score:-3},{date:"2020-08-06",name:"d",age:22,action:"push",score:9},{date:"2020-08-07",name:"b",age:20,action:"pull",score:15},{date:"2020-08-07",name:"c",age:24,action:"push",score:0},{date:"2020-08-08",name:"a",age:18,action:"push",score:1},{date:"2020-08-09",name:"a",age:18,action:"push"}];var B={setup(){const{cube:s,cubeSettings:n}=A(y);return{cube:s,cubeSettings:n}}};B.render=function(s,n,e,a,t,o){return d(),D("div")};const O={components:{demo29:B}},_='{"title":"useDocumentVisibility","description":"","frontmatter":{"map":{"realPath":"src/useOLAP/index.md"}},"headers":[{"level":2,"title":"代码演示","slug":"代码演示"},{"level":3,"title":"基本用法","slug":"基本用法"},{"level":3,"title":"参数","slug":"参数"}],"relativePath":"src/useOLAP/index.md","lastUpdated":1627530531293}',S=f('<h1 id="usedocumentvisibility"><a class="header-anchor" href="#usedocumentvisibility" aria-hidden="true">#</a> useDocumentVisibility</h1><p>分析多维数据的 hooks。</p><h2 id="代码演示"><a class="header-anchor" href="#代码演示" aria-hidden="true">#</a> 代码演示</h2><h3 id="基本用法"><a class="header-anchor" href="#基本用法" aria-hidden="true">#</a> 基本用法</h3>',4),w=f('<h3 id="参数"><a class="header-anchor" href="#参数" aria-hidden="true">#</a> 参数</h3><table><thead><tr><th>参数</th><th style="text-align:right;">说明</th><th style="text-align:right;">类型</th><th style="text-align:right;">值</th></tr></thead><tbody><tr><td>documentVisibility</td><td style="text-align:right;">判断 document 是否在是否处于可见状态</td><td style="text-align:right;">string</td><td style="text-align:right;">&#39;visible&#39; | &#39;hidden&#39; | &#39;prerender&#39; | undefined</td></tr></tbody></table>',2);O.render=function(s,n,e,a,t,o){const u=m("demo29"),c=m("demo");return d(),D("div",null,[S,F("p",null,[F(c,{src:"./demo/demo.vue",language:"vue",title:"基本用法",desc:"分析多维数据",componentName:"demo29",htmlStr:"%3Cpre%20v-pre%3E%3Ccode%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Ediv%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Etemplate%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%3C%2Fspan%3Escript%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20attr-name%22%3Elang%3C%2Fspan%3E%3Cspan%20class%3D%22token%20attr-value%22%3E%3Cspan%20class%3D%22token%20punctuation%20attr-equals%22%3E%3D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3Ets%3Cspan%20class%3D%22token%20punctuation%22%3E%22%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20script%22%3E%3Cspan%20class%3D%22token%20language-javascript%22%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20useOLAP%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'ahooks-vue'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20keyword%22%3Eimport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20data%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Efrom%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20string%22%3E'.%2Fdata'%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22token%20keyword%22%3Eexport%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20keyword%22%3Edefault%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20function%22%3Esetup%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Econst%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%20cubeSettings%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20operator%22%3E%3D%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20function%22%3EuseOLAP%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E(%3C%2Fspan%3Edata%3Cspan%20class%3D%22token%20punctuation%22%3E)%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%0A%20%20%20%20%3Cspan%20class%3D%22token%20keyword%22%3Ereturn%3C%2Fspan%3E%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7B%3C%2Fspan%3E%0A%20%20%20%20%20%20cube%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%20%20cubeSettings%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%20%20%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%2C%3C%2Fspan%3E%0A%3Cspan%20class%3D%22token%20punctuation%22%3E%7D%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3B%3C%2Fspan%3E%0A%3C%2Fspan%3E%3C%2Fspan%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20tag%22%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%26lt%3B%2F%3C%2Fspan%3Escript%3C%2Fspan%3E%3Cspan%20class%3D%22token%20punctuation%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3C%2Fcode%3E%3C%2Fpre%3E",codeStr:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%0A%3Cscript%20lang%3D%22ts%22%3E%0Aimport%20%7B%20useOLAP%20%7D%20from%20'ahooks-vue'%3B%0Aimport%20%7B%20data%20%7D%20from%20'.%2Fdata'%3B%0A%0Aexport%20default%20%7B%0A%20%20setup()%20%7B%0A%20%20%20%20const%20%7B%20cube%2C%20cubeSettings%20%7D%20%3D%20useOLAP(data)%3B%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20cube%2C%0A%20%20%20%20%20%20cubeSettings%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%0A%7D%3B%0A%3C%2Fscript%3E%0A"},{default:k((()=>[F(u)])),_:1})]),w])};export default O;export{_ as __pageData};
